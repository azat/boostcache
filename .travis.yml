language: cpp

compiler:
    - gcc

before_script:
    # TODO: replace custom ppa by boost1.54, that contain boost-log library
    - sudo add-apt-repository -y ppa:azat/boost-unofficial
    # HACK: Update gcc it to support c++11
    #
    # We can't use clang because libstdc++4.7 contains a broken definition of std::common_type
    # http://llvm.org/bugs/show_bug.cgi?id=12893
    #
    # TODO: wait for travis-ci/travis-core#195
    - sudo add-apt-repository -y "deb http://us.archive.ubuntu.com/ubuntu/ quantal main"
    - sudo apt-get update
    - sudo apt-get install g++
    - sudo apt-get install libboost1.53-all-dev
    - sudo apt-get install gawk gnuplot bc
    # Version of some utils
    - bash --version
    - awk --version
    - gawk --version
    - sed --version
    - gnuplot --version
    - bc --version

script:
    - mkdir .cmake
    - cd .cmake
    - cmake -DCMAKE_BUILD_TYPE=Distribution ..
    - make VERBOSE=1
    - ../utils/run_benchmarks.sh
   # Build graphs in terminal
    - ../utils/build_graphs.sh -w 2 -f dumb
   # TODO: add gtest

branches:
    only:
        - master

# TODO: add notifications

